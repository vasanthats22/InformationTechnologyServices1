<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stackly IT Services - Forgot Password</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
<style>
  * {margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;}
  body, html {width:100%; min-height:100%; background:#f5f5f5;}

  .container {
    display:flex;
    min-height:100vh;
    width:100%;
  }

  /* LEFT PANEL */
  .left {
    flex:1;
    background:linear-gradient(135deg,#0a1f44,#003366);
    color:#fff;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    padding:60px 40px;
    text-align:center;
  }
  .left h1 {font-size:36px; margin-bottom:20px; color:#00aaff;}
  .left p {font-size:18px; line-height:1.6;}

  /* RIGHT PANEL */
  .right {
    flex:1;
    display:flex;
    justify-content:center;
    align-items:center;
    padding:60px 40px;
  }

  .card {
    width:100%;
    max-width:400px;
    background:#fff;
    padding:40px;
    border-radius:15px;
    box-shadow:0 15px 40px rgba(0,0,0,0.2);
    text-align:center;
  }

  .card h2 {margin-bottom:30px; color:#0a1f44;}

  .form-group {margin-bottom:20px; text-align:left;}

  input {
    width:100%;
    padding:12px 15px;
    border-radius:8px;
    border:1px solid #ccc;
    font-size:16px;
    transition:0.3s;
  }
  input:focus {border:2px solid #00aaff; outline:none;}

  .error-message {color:#ff4d4d; font-size:13px; margin-top:5px; display:none;}

  .submit-btn {
    display:block;
    width:100%;
    padding:14px;
    background: linear-gradient(90deg,#00aaff,#00ffaa);
    color:#fff;
    border:none;
    border-radius:8px;
    font-size:16px;
    font-weight:bold;
    text-decoration:none;
    text-align:center;
    cursor:pointer;
    transition:0.3s;
  }
  .submit-btn:hover {transform:scale(1.03); opacity:0.9;}

  .links {margin-top:15px; text-align:center;}
  .links a {color:#0a1f44; text-decoration:none; transition:0.3s; margin:0 5px;}
  .links a:hover {color:#00aaff;}

  /* RESPONSIVE */
  @media(max-width:900px){
    .container {flex-direction:column;}
    .left, .right {flex:unset; width:100%; padding:30px;}
    .left {text-align:center;}
    .right {justify-content:center; align-items:flex-start;}
    .card {margin:20px 0;}
  }

  @media(max-width:480px){
    .left h1 {font-size:28px;}
    .left p {font-size:16px;}
    .card {padding:30px;}
    input {padding:10px; font-size:14px;}
    .submit-btn {padding:12px; font-size:14px;}
  }
</style>
</head>
<body>

  <!-- HEADER -->
<div id="header-placeholder"></div>


<div class="container">

  <div class="left">
    <h1>STACKLY IT SERVICES</h1>
    <p>Reset your password securely. Enter your email and set a new password.</p>
  </div>

  <div class="right">
    <div class="card">

      <h2>Reset Password</h2>

      <form id="forgotForm">

        <!-- EMAIL -->
        <div class="form-group">
          <label>Email</label>
          <input type="email" id="email" placeholder="Enter your email" required>
          <div class="error-message" id="emailError">Enter a valid email address</div>
        </div>

        <!-- PASSWORD -->
        <div class="form-group">
          <label>New Password</label>
          <input type="password" id="password" placeholder="Enter new password" required>
          <div class="error-message" id="passwordError">
            Minimum 8 characters, include 1 uppercase, 1 number & 1 special character
          </div>
        </div>

        <!-- CONFIRM PASSWORD -->
        <div class="form-group">
          <label>Confirm Password</label>
          <input type="password" id="confirmPassword" placeholder="Re-enter password" required>
          <div class="error-message" id="confirmError">Passwords do not match</div>
        </div>

        <a href="#" class="submit-btn" id="forgotBtn">Submit</a>

        <div class="links">
          <a href="login.html">Back to Login</a>
        </div>

      </form>

    </div>
  </div>
</div>

<!-- FOOTER -->
<div id="footer-placeholder"></div>

<script>
  const forgotBtn = document.getElementById('forgotBtn');
  const emailInput = document.getElementById('email');
  const passwordInput = document.getElementById('password');
  const confirmInput = document.getElementById('confirmPassword');

  const emailError = document.getElementById('emailError');
  const passwordError = document.getElementById('passwordError');
  const confirmError = document.getElementById('confirmError');

  forgotBtn.addEventListener('click', function(e){
    e.preventDefault();
    let valid = true;

    const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$/;
    const passwordPattern = /^(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;

    if(!emailPattern.test(emailInput.value.trim())){
      emailError.style.display = 'block';
      emailInput.style.border = '2px solid #ff4d4d';
      valid = false;
    } else { emailError.style.display = 'none'; emailInput.style.border='1px solid #ccc'; }

    if(!passwordPattern.test(passwordInput.value.trim())){
      passwordError.style.display = 'block';
      passwordInput.style.border = '2px solid #ff4d4d';
      valid = false;
    } else { passwordError.style.display = 'none'; passwordInput.style.border='1px solid #ccc'; }

    if(passwordInput.value !== confirmInput.value){
      confirmError.style.display = 'block';
      confirmInput.style.border = '2px solid #ff4d4d';
      valid = false;
    } else { confirmError.style.display = 'none'; confirmInput.style.border='1px solid #ccc'; }

    if(valid){ window.location.href='404error.html'; }
  });

  emailInput.addEventListener('input', ()=>{ emailError.style.display='none'; emailInput.style.border='1px solid #ccc'; });
  passwordInput.addEventListener('input', ()=>{ passwordError.style.display='none'; passwordInput.style.border='1px solid #ccc'; });
  confirmInput.addEventListener('input', ()=>{ confirmError.style.display='none'; confirmInput.style.border='1px solid #ccc'; });

  // Load header
  fetch('header.html')
    .then(response => response.text())
    .then(data => {
      document.getElementById('header-placeholder').innerHTML = data;

      // Header Interactions
      const menuBtn = document.querySelector('.menu-btn');
      const homeArrow = document.querySelector('.home-link span');

      menuBtn?.addEventListener('click', () => {
        document.getElementById('navBar').classList.toggle('active');
      });

      homeArrow?.addEventListener('click', (event) => {
        event.preventDefault();
        event.stopPropagation();
        const li = event.target.closest('li');
        li.classList.toggle('show-submenu');
      });
    });

  // Load footer
  fetch('footer.html')
    .then(response => response.text())
    .then(data => {
      document.getElementById('footer-placeholder').innerHTML = data;

      // Subscribe button JS (after footer is loaded)
      const subscribeBtn = document.getElementById('subscribeButton');
      const emailInput = document.getElementById('newsletterEmail');
      const emailError = document.getElementById('emailError');

      subscribeBtn?.addEventListener('click', function(e) {
        const email = emailInput.value.trim();
        const valid = /^[a-zA-Z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$/;

        if (valid.test(email)) {
          // Redirect to 404error.html only if email is valid
          window.location.href = '404error.html';
        } else {
          e.preventDefault();
          emailError.style.display = 'block';
          emailInput.style.border = '2px solid #ff7a00';
        }
      });

      emailInput?.addEventListener('input', function() {
        emailError.style.display = 'none';
        emailInput.style.border = 'none';
      });
    });

  // Animate service boxes on scroll
  const serviceBoxes = document.querySelectorAll('.service-box');
  const observer = new IntersectionObserver(entries => {
    entries.forEach((entry, index) => {
      if(entry.isIntersecting){
        entry.target.style.animation = `fadeInUp 0.8s forwards`;
        entry.target.style.animationDelay = `${index * 0.2}s`;
      }
    });
  }, {threshold:0.2});
  serviceBoxes.forEach(box => observer.observe(box));
</script>

</body>
</html>
